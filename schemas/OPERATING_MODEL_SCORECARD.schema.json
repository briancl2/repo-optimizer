{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OPERATING_MODEL_SCORECARD",
  "description": "Session grader output -- 4 dimensions, 15pt max. Spec 054.",
  "type": "object",
  "required": [
    "schema_version",
    "session_id",
    "timestamp",
    "work_dir",
    "grader_version",
    "dimensions",
    "composite",
    "verdict"
  ],
  "properties": {
    "schema_version": {
      "type": "string"
    },
    "session_id": {
      "type": "string"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "work_dir": {
      "type": "string"
    },
    "grader_version": {
      "type": "string"
    },
    "dimensions": {
      "type": "object",
      "required": [
        "hypothesis_discipline",
        "gate_integrity",
        "learning_extraction",
        "self_correction"
      ],
      "properties": {
        "hypothesis_discipline": {
          "type": "object",
          "required": ["score", "max", "evidence"],
          "properties": {
            "score": { "type": "integer", "minimum": 0, "maximum": 3 },
            "max": { "type": "integer", "enum": [3] },
            "evidence": { "type": "array", "items": { "type": "string" } }
          }
        },
        "gate_integrity": {
          "type": "object",
          "required": ["score", "max", "evidence"],
          "properties": {
            "score": { "type": "integer", "minimum": 0, "maximum": 4 },
            "max": { "type": "integer", "enum": [4] },
            "evidence": { "type": "array", "items": { "type": "string" } }
          }
        },
        "learning_extraction": {
          "type": "object",
          "required": ["score", "max", "evidence"],
          "properties": {
            "score": { "type": "integer", "minimum": 0, "maximum": 4 },
            "max": { "type": "integer", "enum": [4] },
            "evidence": { "type": "array", "items": { "type": "string" } }
          }
        },
        "self_correction": {
          "type": "object",
          "required": ["score", "max", "evidence"],
          "properties": {
            "score": { "type": "integer", "minimum": 0, "maximum": 4 },
            "max": { "type": "integer", "enum": [4] },
            "evidence": { "type": "array", "items": { "type": "string" } }
          }
        }
      }
    },
    "composite": {
      "type": "object",
      "required": ["score", "max", "percentage"],
      "properties": {
        "score": { "type": "integer", "minimum": 0, "maximum": 15 },
        "max": { "type": "integer", "enum": [15] },
        "percentage": { "type": "number", "minimum": 0, "maximum": 100 }
      }
    },
    "verdict": {
      "type": "string",
      "enum": ["PASS", "PARTIAL", "FAIL"]
    }
  }
}
